import React, { useState, useCallback, useEffect } from "react";
import styles from "./ProjectItem.module.scss";
import classNames from "classnames/bind";
import Gallery from "react-photo-gallery";
import Carousel, { Modal, ModalGateway } from "react-images";
import AOS from "aos";
import "aos/dist/aos.css";
const cx = classNames.bind(styles);

const ProjectItem = ({ data, t }) => {
    const [showGallery, setShowGallery] = useState(false);
    const [currentImage, setCurrentImage] = useState(0);
    const [viewerIsOpen, setViewerIsOpen] = useState(false);

    const openLightbox = useCallback(() => {
        // console.log(event);
        setCurrentImage(0);
        setViewerIsOpen(true);
    }, []);

    const closeLightbox = () => {
        setCurrentImage(0);
        setViewerIsOpen(false);
    };

    useEffect(() => {
        AOS.init();
    }, []);
    return (
        <div
            className={cx("project-item")}
            data-aos="fade-right"
            data-aos-duration="3000"
        >
            <div className={cx("project-item-info")}>
                <div className={cx("project-content")}>
                    <div className={cx("project-content-header")}>
                        <h1>{data.name}</h1>
                        <div className={cx("project-content-info")}>
                            <div className={cx("project-content-info-item")}>
                                <svg
                                    xmlns="http://www.w3.org/2000/svg"
                                    width="16"
                                    height="16"
                                    viewBox="0 0 16 16"
                                    fill="none"
                                >
                                    <path
                                        d="M8 1C6.54182 1.00165 5.14383 1.58165 4.11274 2.61274C3.08165 3.64383 2.50165 5.04182 2.5 6.5C2.5 11.2063 7.5 14.7606 7.71313 14.9094C7.7972 14.9683 7.89735 14.9999 8 14.9999C8.10265 14.9999 8.2028 14.9683 8.28687 14.9094C8.5 14.7606 13.5 11.2063 13.5 6.5C13.4983 5.04182 12.9184 3.64383 11.8873 2.61274C10.8562 1.58165 9.45818 1.00165 8 1ZM8 4.5C8.39556 4.5 8.78224 4.6173 9.11114 4.83706C9.44004 5.05682 9.69638 5.36918 9.84776 5.73463C9.99913 6.10009 10.0387 6.50222 9.96157 6.89018C9.8844 7.27814 9.69392 7.63451 9.41421 7.91421C9.13451 8.19392 8.77814 8.3844 8.39018 8.46157C8.00222 8.53874 7.60009 8.49913 7.23463 8.34776C6.86918 8.19638 6.55682 7.94004 6.33706 7.61114C6.1173 7.28224 6 6.89556 6 6.5C6 5.96957 6.21071 5.46086 6.58579 5.08579C6.96086 4.71071 7.46957 4.5 8 4.5Z"
                                        fill="#363333"
                                    />
                                </svg>
                                <span>
                                    {t("project.Address")}:{" "}
                                    {t(`project.${data.address}`)}
                                </span>
                            </div>
                            <div className={cx("project-content-info-item")}>
                                <svg
                                    xmlns="http://www.w3.org/2000/svg"
                                    width="16"
                                    height="17"
                                    viewBox="0 0 16 17"
                                    fill="none"
                                >
                                    <path
                                        d="M14.9832 13.5H14.0001V6.50001C14.0001 6.2348 13.8948 5.98044 13.7072 5.7929C13.5197 5.60537 13.2653 5.50001 13.0001 5.50001H10.2501C10.1838 5.50001 10.1202 5.52635 10.0733 5.57323C10.0265 5.62012 10.0001 5.68371 10.0001 5.75001V13.5H9.00012V2.52564C9.00178 2.36987 8.96797 2.21578 8.90127 2.07501C8.83457 1.93424 8.73672 1.8105 8.61512 1.71314C8.44937 1.58391 8.24712 1.51019 8.03709 1.50245C7.82706 1.49471 7.61993 1.55334 7.44512 1.67001L2.44512 5.00001C2.30796 5.09152 2.19555 5.21553 2.11791 5.361C2.04027 5.50647 1.99981 5.66887 2.00012 5.83376V13.5H1.017C0.887788 13.4981 0.76265 13.5452 0.666755 13.6318C0.570861 13.7184 0.511324 13.8382 0.500122 13.9669C0.495581 14.0353 0.50515 14.1039 0.528236 14.1684C0.551322 14.233 0.587432 14.2921 0.634322 14.3421C0.681211 14.3921 0.73788 14.4319 0.800808 14.459C0.863736 14.4862 0.931578 14.5002 1.00012 14.5H15.0001C15.0687 14.5002 15.1365 14.4862 15.1994 14.459C15.2624 14.4319 15.319 14.3921 15.3659 14.3421C15.4128 14.2921 15.4489 14.233 15.472 14.1684C15.4951 14.1039 15.5047 14.0353 15.5001 13.9669C15.4889 13.8382 15.4294 13.7184 15.3335 13.6318C15.2376 13.5452 15.1125 13.4981 14.9832 13.5ZM4.75012 12C4.75027 12.0686 4.73633 12.1364 4.70916 12.1993C4.68198 12.2623 4.64216 12.3189 4.59216 12.3658C4.54217 12.4127 4.48307 12.4488 4.41853 12.4719C4.35399 12.495 4.28539 12.5046 4.217 12.5C4.08815 12.4888 3.96834 12.4292 3.88171 12.3331C3.79507 12.2371 3.74805 12.1118 3.75012 11.9825V11.0169C3.74836 10.8877 3.7955 10.7627 3.88209 10.6668C3.96868 10.5709 4.08832 10.5114 4.217 10.5C4.28539 10.4955 4.35399 10.505 4.41853 10.5281C4.48307 10.5512 4.54217 10.5873 4.59216 10.6342C4.64216 10.6811 4.68198 10.7378 4.70916 10.8007C4.73633 10.8636 4.75027 10.9315 4.75012 11V12ZM4.75012 8.50001C4.75027 8.56856 4.73633 8.6364 4.70916 8.69933C4.68198 8.76225 4.64216 8.81892 4.59216 8.86581C4.54217 8.9127 4.48307 8.94881 4.41853 8.9719C4.35399 8.99498 4.28539 9.00455 4.217 9.00001C4.08821 8.98866 3.96848 8.92899 3.88188 8.833C3.79527 8.737 3.7482 8.61179 3.75012 8.48251V7.51689C3.74836 7.38772 3.7955 7.26266 3.88209 7.1668C3.96868 7.07093 4.08832 7.01136 4.217 7.00001C4.28539 6.99547 4.35399 7.00504 4.41853 7.02813C4.48307 7.05121 4.54217 7.08732 4.59216 7.13421C4.64216 7.1811 4.68198 7.23777 4.70916 7.3007C4.73633 7.36363 4.75027 7.43147 4.75012 7.50001V8.50001ZM7.25012 12C7.25027 12.0686 7.23633 12.1364 7.20916 12.1993C7.18198 12.2623 7.14216 12.3189 7.09216 12.3658C7.04217 12.4127 6.98307 12.4488 6.91853 12.4719C6.85399 12.495 6.78539 12.5046 6.717 12.5C6.58837 12.4888 6.46874 12.4294 6.38214 12.3336C6.29554 12.2378 6.24837 12.1129 6.25012 11.9838V11.0169C6.24852 10.8878 6.29573 10.7629 6.38231 10.6672C6.46888 10.5715 6.58843 10.512 6.717 10.5006C6.78539 10.4961 6.85399 10.5057 6.91853 10.5288C6.98307 10.5518 7.04217 10.5879 7.09216 10.6348C7.14216 10.6817 7.18198 10.7384 7.20916 10.8013C7.23633 10.8643 7.25027 10.9321 7.25012 11.0006V12ZM7.25012 8.50001C7.25027 8.56856 7.23633 8.6364 7.20916 8.69933C7.18198 8.76225 7.14216 8.81892 7.09216 8.86581C7.04217 8.9127 6.98307 8.94881 6.91853 8.9719C6.85399 8.99498 6.78539 9.00455 6.717 9.00001C6.58843 8.98867 6.46888 8.92918 6.38231 8.83345C6.29573 8.73772 6.24852 8.61282 6.25012 8.48376V7.51689C6.24852 7.38783 6.29573 7.26292 6.38231 7.16719C6.46888 7.07146 6.58843 7.01197 6.717 7.00064C6.78539 6.9961 6.85399 7.00566 6.91853 7.02875C6.98307 7.05184 7.04217 7.08795 7.09216 7.13484C7.14216 7.18173 7.18198 7.23839 7.20916 7.30132C7.23633 7.36425 7.25027 7.43209 7.25012 7.50064V8.50001Z"
                                        fill="#363333"
                                    />
                                </svg>
                                <span>
                                    {t("project.Investor")}:{" "}
                                    {t(`project.${data.ownOfProject}`)}
                                </span>
                            </div>
                            <div className={cx("project-content-info-item")}>
                                <svg
                                    xmlns="http://www.w3.org/2000/svg"
                                    width="16"
                                    height="16"
                                    viewBox="0 0 16 16"
                                    fill="none"
                                >
                                    <path
                                        d="M14.2075 4.5856L11.4144 1.7931C11.3215 1.70021 11.2113 1.62653 11.0899 1.57626C10.9686 1.526 10.8385 1.50012 10.7072 1.50012C10.5759 1.50012 10.4458 1.526 10.3245 1.57626C10.2031 1.62653 10.0929 1.70021 10 1.7931L2.29313 9.49997C2.19987 9.59249 2.12593 9.70263 2.0756 9.82398C2.02528 9.94533 1.99959 10.0755 2.00001 10.2068V13C2.00001 13.2652 2.10536 13.5195 2.2929 13.7071C2.48043 13.8946 2.73479 14 3.00001 14H5.79313C5.9245 14.0004 6.05464 13.9747 6.17599 13.9244C6.29735 13.8741 6.40748 13.8001 6.50001 13.7068L11.7294 8.4781L11.9469 9.34685L9.64688 11.6462C9.55306 11.74 9.50032 11.8671 9.50026 11.9998C9.5002 12.1324 9.55283 12.2596 9.64657 12.3534C9.74031 12.4472 9.86747 12.5 10.0001 12.5C10.1327 12.5001 10.2599 12.4475 10.3538 12.3537L12.8538 9.85372C12.9149 9.79269 12.9592 9.71685 12.9823 9.6336C13.0054 9.55036 13.0066 9.46254 12.9856 9.37872L12.5544 7.6531L14.2075 5.99997C14.3004 5.90711 14.3741 5.79686 14.4243 5.67552C14.4746 5.55418 14.5005 5.42412 14.5005 5.29278C14.5005 5.16144 14.4746 5.03139 14.4243 4.91005C14.3741 4.78871 14.3004 4.67846 14.2075 4.5856ZM12 6.7931L9.20751 3.99997L10.7075 2.49997L13.5 5.2931L12 6.7931Z"
                                        fill="#363333"
                                    />
                                </svg>
                                <span>
                                    {t("project.Consultancy")}:{" "}
                                    {t(`project.${data.consultingUnit}`)}
                                </span>
                            </div>
                        </div>
                    </div>
                    <h3 onClick={openLightbox}>
                        {t("project.Some project images")}{" "}
                    </h3>
                    {/* <div className={cx("project-content-btn")}>
                    <button>View</button>
                </div> */}
                </div>
                <div className={cx("project-img")}>
                    <img src={data.images[0].src} />
                </div>
            </div>
            <div
                className={cx("project-item-bottom")}
                data-aos="fade-right"
                data-aos-duration="3000"
            >
                {showGallery && <Gallery photos={data.images} />}
                <ModalGateway>
                    {viewerIsOpen ? (
                        <Modal onClose={closeLightbox}>
                            <Carousel
                                currentIndex={currentImage}
                                views={data.images.map((x) => ({
                                    ...x,
                                    srcset: x.srcSet,
                                    caption: x.title,
                                }))}
                            />
                        </Modal>
                    ) : null}
                </ModalGateway>
            </div>
        </div>
    );
};

export default ProjectItem;
